<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Niranjan AI</title>

<style>
body{
    margin:0;
    height:100vh;
    background:linear-gradient(135deg,cyan,silver);
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:Segoe UI,sans-serif;
}

#app{
    width:420px;
    height:600px;
    background:rgba(0,0,0,0.9);
    border-radius:20px;
    box-shadow:0 0 25px cyan;
    display:flex;
    flex-direction:column;
    overflow:hidden;
}

#header{
    background:linear-gradient(90deg,cyan,silver);
    color:black;
    padding:15px;
    text-align:center;
    font-size:22px;
    font-weight:bold;
}

#chat{
    flex:1;
    padding:15px;
    overflow-y:auto;
}

.msg{
    max-width:80%;
    margin:8px 0;
    padding:12px 15px;
    border-radius:15px;
    font-size:15px;
    word-wrap:break-word;
}

.user{
    background:cyan;
    color:black;
    margin-left:auto;
    border-bottom-right-radius:0;
}

.bot{
    background:#222;
    color:silver;
    margin-right:auto;
    border-bottom-left-radius:0;
}

#inputBox{
    display:flex;
    padding:12px;
    background:#111;
}

#text{
    flex:1;
    padding:10px;
    font-size:15px;
    border:none;
    border-radius:8px;
    outline:none;
}

#send{
    margin-left:10px;
    padding:0 18px;
    font-size:22px;
    background:linear-gradient(cyan,silver);
    border:none;
    border-radius:8px;
    cursor:pointer;
}

#send:hover{
    transform:scale(1.1);
}
</style>
</head>

<body>

<div id="app">
<div id="header"></div>

<div id="chat"></div>

<div id="inputBox">
<input id="text" placeholder="Ask anything...">
<button id="send">â–¶</button>
</div>

</div>

<script>

const chat=document.getElementById("chat");
const input=document.getElementById("text");
const sendBtn=document.getElementById("send");

function addMsg(text,type){

    let div=document.createElement("div");

    div.className="msg "+type;

    div.textContent=text;

    chat.appendChild(div);

    chat.scrollTop=chat.scrollHeight;
}

async function send(){

    let msg=input.value.trim();

    if(msg==="") return;

    addMsg(msg,"user");

    input.value="";

    let loading=document.createElement("div");

    loading.className="msg bot";

    loading.textContent="Typing...";

    chat.appendChild(loading);

    chat.scrollTop=chat.scrollHeight;

    try{

        const res=await fetch("http://localhost:3000/chat",{

            method:"POST",

            headers:{
                "Content-Type":"application/json"
            },

            body:JSON.stringify({
                message:msg
            })

        });

        const data=await res.json();

        loading.remove();

        addMsg(data.reply,"bot");

    }catch(e){

        loading.remove();

        addMsg("Connection Error","bot");

    }

}

sendBtn.onclick=send;

input.addEventListener("keydown",e=>{
    if(e.key==="Enter") send();
});

</script>

</body>
</html>